# -1 :题型查询接口：

1. GET /api/questions/type（查询笔记中有的科目）
```json
{
  "code": 200,
  "message": "success",
  "data": {
  "subject":["选择","填空"]
  }
}
```
# 0:科目查询接口: (返回数据库中有的科目)

1. GET /api/notes/subject（查询笔记中有的科目）
```json
{
  "code": 200,
  "message": "success",
  "data": {
  "subject":["数学","英语"]
  }
}
```
2. GET /api/questions/subject（查询笔记中有的科目）
```json
{
  "code": 200,
  "message": "success",
  "data": {
  "subject":["数学","英语"]
  }
}

```
# 一、笔记相关接口
接口设计
接口类型	路径	说明
GET	/api/notes	查询当前用户的所有笔记列表及附加内容（摘要 / 思维导图等）存在状态
GET	/api/notes/{noteId}	查询当前用户指定笔记的详情及摘要、思维导图、关键词、讲解等具体内容
前端请求接口 & 后端响应接口
1. GET /api/notes（查询所有笔记列表）
前端请求：

```typescript
interface GetAllNotesParams {
  pageNum?: number; // 可选，页码，默认1
  pageSize?: number; // 可选，每页条数，默认10
  subject?:string;//可选，确定科目，为null则为全部
}
````
后端响应：

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "total": 50, // 总笔记数
    "notes": [
      {
        "noteId": "note_001",
        "subject": "高等数学",
        "title": "高等数学微积分笔记",
        "createTime": "2024-07-01 09:30:00",
        "updateTime": "2024-07-02 14:20:00",
        "hasExtract": true, // 是否有摘要
        "hasMindMap": true, // 是否有思维导图
        "hasKeywords": false, // 是否有关键词
        "hasExplanation": true // 是否有讲解
      }
      // 更多笔记...
    ]
  }
}
```
2. GET /api/notes/{noteId}/basic（查询笔记基本信息）
前端请求：

```typescript
interface GetNoteBasicParams {
  noteId: string; // 笔记ID（路径参数）
}

```
后端响应：

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "note_id": "note_001",
    "title": "高等数学微积分笔记",
    "content": "1. 导数的定义：... 2. 微分的几何意义：...",
    "createTime": "2024-07-01 09:30:00",
    "updateTime": "2024-07-02 14:20:00"
  },
  "timestamp": 1721865100
}
```
2. GET /api/notes/{noteId}/mindmap（查询笔记思维导图）
前端请求：

```typescript
interface GetNoteMindmapParams {
  noteId: string; // 笔记ID（路径参数）
}
```
后端响应：

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "note_id": "note_001",
    "mindMap": {
      "mindmap_id": "mm_<年月日>",
      "root_node": {
        "id": "n0",
        "label": "核心主题",
        "children": [
          {
            "id": "n0-1",
            "label": "一级分支",
            "children": [
              {
                "id": "n0-1-1",
                "label": "二级分支"
              }
            ]
          }
        ]
      }
    }
    // 无数据时为："mindMap": null
  },
  "timestamp": 1721865100
}
```
4. GET /api/notes/{noteId}/keywords（查询笔记关键词）
前端请求：

```typescript
interface GetNoteKeywordsParams {
  noteId: string; // 笔记ID（路径参数）
}
```
后端响应：

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "note_id": "note_001",
    "keywords": [
      {
        "term": "求导",
        "tfidf_score": 0.92
      }
    ]
    // 无数据时为："keywords": null
  },
  "timestamp": 1721865100
}
```
5. GET /api/notes/{noteId}/explanation（查询笔记讲解内容）
前端请求：

```typescript
interface GetNoteExplanationParams {
  noteId: string; // 笔记ID（路径参数）
}
```
后端响应：

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "note_id": "note_001",
    "explanation": "### 导数的物理意义\n\n可以理解为瞬时变化率，例如...（Markdown格式）"
    // 无数据时为："explanation": null
  },
  "timestamp": 1721865100
}
```
二、题目 / 错题相关接口
接口设计
接口类型	路径	说明
GET	/api/questions	查询当前用户的所有题目 / 错题列表及附加内容存在状态
GET	/api/questions/{questionId}	查询当前用户指定题目 / 错题的详情及各类附加内容具体信息
前端请求接口 & 后端响应接口
1. GET /api/questions（查询所有题目 / 错题列表）
前端请求：

```typescript
interface GetAllQuestionsParams {
  isWrong?: boolean; // 可选，true=仅查错题，false/undefined=查所有题目
  pageNum?: number; // 可选，页码，默认1
  pageSize?: number; // 可选，每页条数，默认10
  subject?:string;//科目,为空则查询全部
  type?:string;//题型，为空则查询全部
}
```
后端响应：

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "total": 30, // 总题数
    "questions": [
      {
        "questionId": "q_001",
        "content": "求函数f(x) = x² + 2x在x=1处的导数", // 题干
        "type": "calculation", // 题型：计算/选择/填空等
        "isWrong": true, // 是否为错题
        "hasMindMap": false,
        "hasKeywords": true,
        "hasExplanation": true,
        "hasAutoScoreReport": true,
        "hasRelatedItems": true // 相关题目/笔记
      }
      // 更多题目...
    ]
  },
  "timestamp": 1721865200
}
```
2. GET /api/questions/{questionId}/basic（查询题目基本信息）
前端请求：

```typescript
interface GetQuestionBasicParams {
  questionId: string; // 题目ID（路径参数）
}
```

后端响应：

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "questionId": "q_001",
    "content": "求函数f(x) = x² + 2x在x=1处的导数",
    "type": "calculation",
    "isWrong": true
  },
  "timestamp": 1721865300
}
```
2. GET /api/questions/{questionId}/mindmap（查询题目思维导图）
前端请求：

```typescript
interface GetQuestionMindmapParams {
  questionId: string; // 题目ID（路径参数）
}
```

后端响应：

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "questionId": "q_001",
    "mindMap": null
    // 若有数据则为：
    // {
    //   "mindmap_id": "mm_<年月日>",
    //   "root_node": {
    //     "id": "n0",
    //     "label": "核心主题",
    //     "children": [
    //       {
    //         "id": "n0-1",
    //         "label": "一级分支",
    //         "children": [
    //           {
    //             "id": "n0-1-1",
    //             "label": "二级分支"
    //           }
    //         ]
    //       }
    //     ]
    //   }
    // }
  },
  "timestamp": 1721865300
}
```
3. GET /api/questions/{questionId}/keywords（查询题目关键词）
前端请求：

```typescript
interface GetQuestionKeywordsParams {
  questionId: string; // 题目ID（路径参数）
}
```
后端响应：

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "questionId": "q_001",
    "keywords": [ {
                     "term": "求导",
                    "tfidf_score": 0.92 }]
                     // 关键词列表，无则为null
  },
  "timestamp": 1721865300
}
```
4. GET /api/questions/{questionId}/explanation（查询题目解题讲解）
前端请求：

```typescript
interface GetQuestionExplanationParams {
  questionId: string; // 题目ID（路径参数）
}
```
后端响应：

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "questionId": "q_001",
    "explanation": "### 解题步骤\n\n1. 根据求导公式(xⁿ)’ = n xⁿ⁻¹，对f(x)求导：...（Markdown格式）"
  },
  "timestamp": 1721865300
}
```
5. GET /api/questions/{questionId}/auto-score（查询题目自动评分报告）
前端请求：

```typescript
interface GetQuestionAutoScoreParams {
  questionId: string; // 题目ID（路径参数）
}
```
后端响应：

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "questionId": "q_001",
    "autoScoreReport": {
      "code": 1,
      "score": 8.5,
      "correct_answer": "选择a",
      "your_answer": "选择b",
      "error_analysis": ["导数计算错误"],
      "explanation": [
        "解题思路：通过求导判断函数单调性",
        "关键步骤：f'(x)=3x²-2x+1"
      ],
      "knowledge_point": ["导数应用"]
    }
  },
  "timestamp": 1721865300
}
```
6. GET /api/questions/{questionId}/related-items（查询题目相关内容）
前端请求：

```typescript
interface GetQuestionRelatedItemsParams {
  questionId: string; // 题目ID（路径参数）
}
```
后端响应：

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "questionId": "q_001",
    "relatedItems": {
      "related_notes": [
        {
          "noteId": "note_001",
          "title": "高等数学微积分笔记",
          "content": "笔记详细内容",
          "similarity": 0.85
        }
      ],
      "related_questions": [
        {
          "questionId": "q_005",
          "content": "求函数f(x) = sinx在x=0处的导数",
          "similarity": 0.72
        }
      ]
    }
  },
  "timestamp": 1721865300
}
```
三、通用说明
状态码说明：
200：请求成功
400：参数错误（如isWrong非布尔值、pageNum为负数等）
404：资源不存在（如noteId或questionId无效）
401：未授权（用户名无效或未登录）
500：服务器内部错误

分页逻辑：
当pageNum和pageSize不传时，默认返回前 10 条数据；
响应中的total字段用于前端计算分页页数。
附加内容规则：
所有 “附加内容”（如摘要、思维导图等）不存在时，响应中对应字段为null；
